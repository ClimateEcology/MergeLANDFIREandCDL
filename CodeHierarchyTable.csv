Workflow Step,Creates multiple SLURM jobs?,Description,Run script,SLURM script,Geospatial script,Custom geospatial functions
1,No,"Download and format spatial necessary for the rest of these analyses, including raster layers and polygons of regions. This code also standardizes no data values (some years of CDL have different specification of NoData values which causes issues).",01DownloadFormatSpatialData_wInternet.sh,NA,DownloadFormatSpatialData_wInternet.R,NA
2.1,"Yes, by region (Southeast, Northeast, Midwest, West) and year","Execute the main geospatial processing steps. In each year, for each state, we split the CDL and NVC rasters into tiles with matching dimensions, merge tile pairs into one raster, and re-create state rasters by stitching together the merged tiles. This step also generates data on the number of mismatched pixels per output tile (part of technical validation).",02RunRegions.sh,02_1RunMerge_in_container_bigmem_bystate.sbatch,RunMergeLANDFIREandCDL_byState.R,merge_landfire_cdl_4tiles.R; mosaic_tiles.R
2.2,No,"In step 2.1, we saved data on mismatched pixels for each output tile for each year. This code aggregates the thousands of .csv files into one giant .csv file.",,02_2TechnicalValidation.sbatch,TechnicalValidation.R,addcounty.R
2.21,No,"Aggregate the data on mismatched pixels (going from bytile to by county) so it is smaller, easier to work with to generate output statistics and figures.",,02_21SummarizeValidationData.sbatch,SummarizeTechValidationData.R,summarize_techval.R
2.3,"Yes, by region (Southeast, Northeast, Midwest, West) and year","Clip state rasters according to state boundaries. In step 2.1 we stitched together the tiles for each state, but some tiles have area beyond state boundaries. Here we clip the blocky states according to polygons of state boundaries.",,02_3ClipStateRaster_bigmem.sbatch,ClipStateRaster.R,NA
2.4,"Yes, by year","Join state rasters to create national, merged rasters for 2012-2021.",,02_4MosaicToNational.sbatch,RunMosaicStates,NA
3.1,"Yes, by year","Convert the data type of final, merged rasters to Int16. This generates much smaller raster files than default type output by R.",03RunPostProcessChecks.sh,03_1ConvertDatatype.sbatch,ConvertRasterDatatype.R,NA
3.2,"Yes, by year","Calculate the number of pixels in NVC, CDL, and merged rasters.",,03_2TabPixels.sbatch,TabulatePixels3Rasters.R,tabulate_pixels_bycounty.R; tabulate_pixels_bystate
3.3,No,"Test the CRS, extent, file size, and raster values of state-level maps.",,03_3RunTests.sbatch,RunTests.R,check_rastersize.R; check_extent_crs.R; check_rastervalues.R
